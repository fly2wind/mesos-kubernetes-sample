# Etcd Upstart and SysVinit configuration file

ETCD_NAME={{ inventory_hostname }}
ETCD_DATA_DIR=/var/lib/etcd
ETCD_LISTEN_CLIENT_URLS={{ etcd_client_scheme }}://0.0.0.0:{{ etcd_client_port }}
ETCD_LISTEN_PEER_URLS={{ etcd_peer_scheme }}://0.0.0.0:{{ etcd_peer_port }}

# Cluster
ETCD_ADVERTISE_CLIENT_URLS={{ etcd_client_scheme }}://{{ private_ipv4 }}:{{ etcd_client_port }}
ETCD_INITIAL_ADVERTISE_PEER_URLS={{ etcd_peer_scheme }}://{{ private_ipv4 }}:{{ etcd_peer_port }}
ETCD_INITIAL_CLUSTER_STATE={{ etcd_initial_cluster_state }}
ETCD_INITIAL_CLUSTER_TOKEN={{ etcd_initial_cluster_token }}
ETCD_INITIAL_CLUSTER={% for host in groups[etcd_servers_group] %}{{ hostvars[host].inventory_hostname }}={{ etcd_peer_scheme }}://{{ hostvars[host].private_ipv4 }}:{{ etcd_peer_port }}{% if not loop.last %},{% endif %}{% endfor %}
